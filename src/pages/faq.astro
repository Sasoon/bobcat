---
import Base from "@/layouts/Base.astro";
import { markdownify } from "@/lib/utils/textConverter";
import { getEntryBySlug } from "astro:content";
import type { TPostType } from "@/types";
const entry = (await getEntryBySlug("faq", "index")) as TPostType;
const { title, description, faqs } = entry.data;
---

<Base title={title} description={description}>
  <section class="py-10 bg-gray-50 sm:py-16 lg:py-24">
    <div class="px-4 mx-auto sm:px-6 lg:px-8 max-w-6xl">
      <div class="max-w-2xl mx-auto text-center">
        <h2
          class="text-3xl font-bold leading-tight text-black sm:text-4xl lg:text-5xl"
        >
          Frequently asked questions
        </h2>
      </div>

      <div class="max-w-3xl mx-auto mt-8 space-y-4 md:mt-16">
        <div
          class="transition-all duration-200 bg-white border border-gray-200 cursor-pointer hover:bg-gray-50"
        >
          <button
            type="button"
            class="flex items-center justify-between w-full px-4 py-5 sm:p-6"
          >
            <span class="flex text-lg font-semibold text-black">
              What's covered in the support package?
            </span>

            <svg
              class="w-6 h-6 text-gray-400 transition-transform duration-200"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>

          <div class="faq-content px-4 pb-5 sm:px-6 sm:pb-6">
            <p>
              Guaranteed fix of any bugs or issues that are identified, 99% site
              uptime, 6hr response time to any and all messages. Unlimited edits
              to your content and basic modifications to the design. Includes
              monthly maintenance work to keep the site running smoothly.I'm
              also available as a consultant to suggest solutions to your
              ongoing problems (such as automating repetitive tasks), and
              helping you scale the site over time.
            </p>
          </div>
        </div>

        <div
          class="transition-all duration-200 bg-white border border-gray-200 cursor-pointer hover:bg-gray-50"
        >
          <button
            type="button"
            class="flex items-center justify-between w-full px-4 py-5 sm:p-6"
          >
            <span class="flex text-lg font-semibold text-black">
              Can I buy out the site?
            </span>

            <svg
              class="w-6 h-6 text-gray-400 transition-transform duration-200"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>

          <div class="faq-content px-4 pb-5 sm:px-6 sm:pb-6">
            <p>
              I offer a CMS package which can be added on after your initial 6
              month term for a one off fee of $750. This will reduce the monthly
              fee to $120 for hosting, maintenance and 1 hour of support. A CMS
              is a content management system that lets you modify your content
              on your own. A training session with me is included for you to
              learn the basics of using the CMS.
            </p>
          </div>
        </div>

        <div
          class="transition-all duration-200 bg-white border border-gray-200 cursor-pointer hover:bg-gray-50"
        >
          <div class="">
            <button
              type="button"
              class="flex items-center justify-between w-full px-4 py-5 sm:p-6"
            >
              <span class="flex text-lg font-semibold text-black">
                Can I cancel my plan?
              </span>

              <svg
                class="w-6 h-6 text-gray-400 transition-transform duration-200"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>

            <div class="faq-content px-4 pb-5 sm:px-6 sm:pb-6">
              <p>
                Yes, after the minimum 6 month term you can cancel the plan at
                any time. After cancellation I will start taking the site down
                gracefully, allowing you to export any content if you wish to do
                so. You own your content and domain name, while the code remains
                my property.
              </p>
            </div>
          </div>
        </div>

        <div
          class="transition-all duration-200 bg-white border border-gray-200 cursor-pointer hover:bg-gray-50"
        >
          <div class="">
            <button
              type="button"
              class="flex items-center justify-between w-full px-4 py-5 sm:p-6"
            >
              <span class="flex text-lg font-semibold text-black">
                I need to add additional features to my site - are they included
                in the plan?
              </span>

              <svg
                class="w-6 h-6 text-gray-400 transition-transform duration-200"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>

            <div class="faq-content px-4 pb-5 sm:px-6 sm:pb-6">
              <p>
                Generally all features (work that adds new functionality that
                didn't exist before) are billable work that I can quote you for.
                An example of a billable feature would be a mailing list or a
                blog. Definitely get in touch if you need to build upon your
                site and we can work something out.
              </p>
            </div>
          </div>
        </div>
        <div
          class="transition-all duration-200 bg-white border border-gray-200 cursor-pointer hover:bg-gray-50"
        >
          <button
            type="button"
            class="flex items-center justify-between w-full px-4 py-5 sm:p-6"
          >
            <span class="flex text-lg font-semibold text-black">
              How can I reach you?
            </span>

            <svg
              class="w-6 h-6 text-gray-400 transition-transform duration-200"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>

          <div class="faq-content px-4 pb-5 sm:px-6 sm:pb-6">
            <p>
              My phone number is 0433315519 and my email is hello@bobcat.dev. I
              will do my best to make myself available for calls and in person
              visits if required, and all correspondence will be addressed on
              the same day.
            </p>
          </div>
        </div>
        <div
          class="transition-all duration-200 bg-white border border-gray-200 cursor-pointer hover:bg-gray-50"
        >
          <button
            type="button"
            class="flex items-center justify-between w-full px-4 py-5 sm:p-6"
          >
            <span class="flex text-lg font-semibold text-black">
              Can I pay lump sum instead of monthly?
            </span>

            <svg
              class="w-6 h-6 text-gray-400 transition-transform duration-200"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>

          <div class="faq-content px-4 pb-5 sm:px-6 sm:pb-6">
            <p>
              If you don't anticipate that you'll need much support and want to
              pay upfront to lower your monthly costs, that can be arranged.
              Lump sum costing starts at $3,500 (half upfront, half upon
              completion of the site) and $50/monthly for hosting and
              maintenance. Support is available on demand at $120/hr.
            </p>
          </div>
        </div>
      </div>

      <p class="text-center text-gray-600 textbase mt-9">
        Didn't find the answer you are looking for? <a
          href="/contact"
          title=""
          class="font-medium text-purple-600 transition-all duration-200 hover:text-blue-700 focus:text-blue-700 hover:underline"
          >Contact me directly</a
        >
      </p>
    </div>
  </section>
</Base>

<style>
  .faq-content {
    height: 0;
    opacity: 0;
    overflow: hidden;
    padding-top: 0;
    padding-bottom: 0;
    transition: all 0.3s ease-in-out;
  }
  .faq-content.active {
    opacity: 1;
  }
</style>

<script>
  function initializeFAQ() {
    const faqItems = document.querySelectorAll(
      ".transition-all.duration-200.bg-white.border.border-gray-200",
    );

    faqItems.forEach((item) => {
      const button = item.querySelector("button");
      const content = item.querySelector(".faq-content");
      const svg = item.querySelector("svg");

      if (content && svg) {
        // Ensure content starts closed
        content.style.height = "0px";
        content.style.paddingTop = "0px";
        content.style.paddingBottom = "0px";

        button.addEventListener("click", () => {
          const isActive = content.classList.contains("active");

          // Close all other active items
          faqItems.forEach((otherItem) => {
            if (otherItem !== item) {
              const otherContent = otherItem.querySelector(".faq-content");
              const otherSvg = otherItem.querySelector("svg");
              if (otherContent && otherContent.classList.contains("active")) {
                otherContent.style.height = "0px";
                otherContent.style.paddingTop = "0px";
                otherContent.style.paddingBottom = "0px";
                otherContent.classList.remove("active");
                otherSvg.style.transform = "rotate(0deg)";
                otherItem.classList.remove("shadow-lg");
              }
            }
          });

          // Toggle current item
          if (!isActive) {
            content.classList.add("active");
            const contentHeight = content.scrollHeight;
            const paddingTop = 16; // 1rem
            const paddingBottom = Math.max(24, contentHeight * 0.1); // At least 1.5rem or 10% of content height
            content.style.height = `${contentHeight + paddingTop + paddingBottom}px`;
            content.style.paddingTop = `${paddingTop}px`;
            content.style.paddingBottom = `${paddingBottom}px`;
            svg.style.transform = "rotate(180deg)";
          } else {
            content.classList.remove("active");
            content.style.height = "0px";
            content.style.paddingTop = "0px";
            content.style.paddingBottom = "0px";
            svg.style.transform = "rotate(0deg)";
          }
          item.classList.toggle("shadow-lg");
        });
      }
    });
  }

  document.addEventListener("astro:page-load", initializeFAQ);
</script>
